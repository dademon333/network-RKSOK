# RKSOK
Рабоче-Крестьянский Стандарт Отправки Команд (РКСОК) 1.0
---
---

В светлых чердаках инновационных лабораторий Сколково лучшими умами отечественной компухтерной науки был разработан наш ответ буржуйскому HTTP.

Наш суверенный аналог, во всём превосходящий отживший своё протокол HTTP, получил название РКСОК, Рабоче-Крестьянский Стандарт Отправки Команд (читается как эР Ка СОК). Стандарт отличается удобством работы и изначальной неизменно высокой планкой безопасности.

РКСОК версии 1.0 состоит из четырёх команд:
- `ОТДОВАЙ` — для возврата данных
- `УДОЛИ` — для удаления данных
- `ЗОПИШИ` — для создания и обновления данных
- `АМОЖНА?` — для получения разрешения обработки команды от специальных органов

Первые три команды предназначены для работы с клиентами, которые могут запрашивать возврат данных, их удаление и сохранение, а четвертая команда предназначена для общения сервера РКСОК с сервером специальных органов проверки всех запросов.

В целях контроля враждебной пропаганды, экстремизма и мазохизма каждый запрос, приходящий на сервер РКСОК, должен проверяться органами проверки, для чего каждый запрос перед обработкой отправляется сначала на сервер проверки, и, если тот возвращает ответ `МОЖНА`, значит, сервер обрабатывает запрос. Если от сервера проверки пришёл любой другой ответ — клиенту возвращается этот ответ, а запрос дальше не обрабатывается.

Клиенты напрямую команду `АМОЖНА?` не отправляют, эту команду отправляет только сервер при проверке возможности обработки клиентских запросов.

Таким образом, необходимо реализовать сервер РКСОК и три его команды — `ОТДОВАЙ`, `УДОЛИ` и `ЗОПИШИ`. При обработке запроса по любой из этих трёх команд, надо переслать полностью запрос с командой `АМОЖНА?` на сервер проверки, и если тот разрешит обработку, то обработать запрос, в противном случае вернуть клиенту ответ от сервера проверки.

## Зависимости
**Python**: Необходимая для запуска версия указана в файле runtime.txt  
**Pip**: Необходимые библиотеки указаны в файле requirements.txt
**Postgresql**: Версия 12 или выше, схема базы находится в файле db_schema.sql

## Запуск:
Необходимо указать следующей переменные окружения (можно в файле .env):
1. DEBUG: True, если код запускается в режиме разработки, иначе - False
2. PSQL_USER - Имя пользователя postgresql
3. PSQL_PASSWORD - Пароль пользователя postgresql
4. PSQL_HOST - Хост postgresql
5. PSQL_PORT - Порт postgresql
6. PSQL_DATABASE - Название базы данных postgresql

Запуск кода:
`python3 main.py`
